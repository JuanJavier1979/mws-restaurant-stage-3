{"version":3,"sources":["app.js"],"names":["registerSW","navigator","register","serviceWorker","log","console","err","connectionStatus","connected","document","getElementById","elAlert","removeChild","DBHelper","checkOfflineReviews","then","reviews","removeOfflineReview","review","checkOfflineFavourites","favourites","forEach","favourite","removeOfflineFavourite","createElement","offlineAlert","setAttribute","offlineAlertText","createTextNode","appendChild","onLine","window","addEventListener"],"mappings":"aAGA,SAASA,aACJ,kBAAmBC,WADxBA,UAASD,cACJE,SAAA,UACSC,KAGsBC,WAAIC,QAAAD,IAAA,8BACzB,SAAcE,GAAAD,QAAAD,IAAA,sCAAAE,KAK7B,IAAMC,iBAAmB,SAACC,GAA1B,GAAMD,EAAAA,CACJ,IAAIC,EAAWC,SAAAC,eAAA,gBACbC,GACAA,EAAGA,cAASC,YAAAD,GAEXE,SAAAC,sBAAAC,KAAA,SAAAC,GACDH,EAASC,QAAAA,SAAAA,GAAAA,OAATD,SAAoCI,oBAAWC,OAC7BL,SAAAM,yBAAqBF,KAAT,SAAAG,GAAZA,EAAhBC,QAAA,SAAAC,GAAA,OAAAT,SAAAU,uBAAAD,WAEFT,CACEO,IAAAA,EAAWC,SAAQG,cAAA,KAAAC,EAAeZ,GAAAA,eAAfY,EAAnBC,aAAA,OAAA,SACD,IAFDC,EAAAlB,SAAAmB,eAAA,4BARFH,EAWOI,YAAAF,GACLlB,SAAIgB,KAAAA,YAAehB,KAInBgB,OAAAA,iBAAaI,OAAYF,WACzBlB,aACDR,UAAA6B,OAnBHvB,kBAAA,GAsBAwB,kBAAOC,KAIJD,OAFDC,iBAEO,SAAA,WAAA,OAAAzB,kBAAA,KAENwB,OAAAC,iBAAA,UAAA,WAAA,OAAAzB,kBAAA","file":"app.js","sourcesContent":["/**\n * Service Worker\n */\nfunction registerSW() {\n  if('serviceWorker' in navigator) {\n    navigator.serviceWorker\n             .register('/sw.js')\n             .then(\n               function() { console.log(\"Service Worker Registered\"); },\n               function(err) { console.log(\"Service Worker Registration Error: \", err); }\n             );\n  }\n}\n\nconst connectionStatus = (connected) => {\n  if (connected) {\n    let elAlert = document.getElementById('offlinealert');\n    if(elAlert) {\n      elAlert.parentElement.removeChild(elAlert);\n    }\n    DBHelper.checkOfflineReviews().then(reviews => {\n      reviews.forEach((review) => DBHelper.removeOfflineReview(review));\n    })\n    DBHelper.checkOfflineFavourites().then(favourites => {\n      favourites.forEach((favourite) => DBHelper.removeOfflineFavourite(favourite));\n    })\n  } else {\n    let offlineAlert = document.createElement('p');\n    offlineAlert.id = 'offlinealert';\n    offlineAlert.setAttribute('role', 'alert');\n    let offlineAlertText = document.createTextNode(\"Your connection is lost.\");\n    offlineAlert.appendChild(offlineAlertText);\n    document.body.appendChild(offlineAlert);\n  }\n}\n\nwindow.addEventListener('load', () => {\n  registerSW();\n  if(navigator.onLine) {\n    connectionStatus(true)\n  } else {\n    connectionStatus(false)\n  }\n});\n\nwindow.addEventListener('online', () => connectionStatus(true));\n\nwindow.addEventListener('offline', () => connectionStatus(false));\n"]}